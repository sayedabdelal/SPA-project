{"ast":null,"code":"import{Form,useNavigate,useNavigation,useActionData,json,redirect}from'react-router-dom';import classes from'./EventForm.module.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function EventForm(_ref){let{method,event}=_ref;const data=useActionData();const navigate=useNavigate();const navigation=useNavigation();const isSubmitting=navigation.state==='submitting';function cancelHandler(){navigate('..');}return/*#__PURE__*/_jsxs(Form,{method:method,className:classes.form,children:[data&&data.errors&&/*#__PURE__*/_jsx(\"ul\",{children:Object.values(data.errors).map(err=>/*#__PURE__*/_jsx(\"li\",{children:err},err))}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{id:\"title\",type:\"text\",name:\"title\",required:true,defaultValue:event?event.title:''})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"image\",children:\"Image\"}),/*#__PURE__*/_jsx(\"input\",{id:\"image\",type:\"url\",name:\"image\",required:true,defaultValue:event?event.image:''})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"date\",children:\"Date\"}),/*#__PURE__*/_jsx(\"input\",{id:\"date\",type:\"date\",name:\"date\",required:true,defaultValue:event?event.date:''})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",name:\"description\",rows:\"5\",required:true,defaultValue:event?event.description:''})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.actions,children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:cancelHandler,disabled:isSubmitting,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{disabled:isSubmitting,children:isSubmitting?'Submitting...':'Save'})]})]});}export default EventForm;export async function action(_ref2){let{request,params}=_ref2;const method=request.method;const data=await request.formData();const eventData={title:data.get('title'),image:data.get('image'),date:data.get('date'),description:data.get('description')};let url='http://localhost:8080/events';if(method==='PATCH'){const eventId=params.eventId;url='http://localhost:8080/events/'+eventId;}const response=await fetch(url,{method:method,headers:{'Content-Type':'application/json'},body:JSON.stringify(eventData)});if(response.status===422){return response;}if(!response.ok){throw json({message:'Could not save event.'},{status:500});}return redirect('/events');}/**\n * \n * navigate and Redirect are both used to change the route programmatically, \n * but navigate is modern and use in function\n * \n * \n *  const navigation = useNavigation();\n * \n *       {navigation.state === 'loading' && <p>Loading...</p>}\n                    idle .. ne process\n                    laoding .. \n                    submitting .. post or put request\n\n   \n */","map":{"version":3,"names":["Form","useNavigate","useNavigation","useActionData","json","redirect","classes","jsx","_jsx","jsxs","_jsxs","EventForm","_ref","method","event","data","navigate","navigation","isSubmitting","state","cancelHandler","className","form","children","errors","Object","values","map","err","htmlFor","id","type","name","required","defaultValue","title","image","date","rows","description","actions","onClick","disabled","action","_ref2","request","params","formData","eventData","get","url","eventId","response","fetch","headers","body","JSON","stringify","status","ok","message"],"sources":["/home/sayed/Documents/ReactJs/redux/Redux-SPA/12-adv-starting-project/frontend/src/components/EventForm.js"],"sourcesContent":["import {\n  Form,\n  useNavigate,\n  useNavigation,\n  useActionData,\n  json,\n  redirect\n} from 'react-router-dom';\n\nimport classes from './EventForm.module.css';\n\nfunction EventForm({ method, event }) {\n  const data = useActionData();\n  const navigate = useNavigate();\n  const navigation = useNavigation();\n\n  const isSubmitting = navigation.state === 'submitting';\n\n  function cancelHandler() {\n    navigate('..');\n  }\n\n  return (\n    <Form method={method} className={classes.form}>\n      {data && data.errors && (\n        <ul>\n          {Object.values(data.errors).map((err) => (\n            <li key={err}>{err}</li>\n          ))}\n        </ul>\n      )}\n      <p>\n        <label htmlFor=\"title\">Title</label>\n        <input\n          id=\"title\"\n          type=\"text\"\n          name=\"title\"\n          required\n          defaultValue={event ? event.title : ''}\n        />\n      </p>\n      <p>\n        <label htmlFor=\"image\">Image</label>\n        <input\n          id=\"image\"\n          type=\"url\"\n          name=\"image\"\n          required\n          defaultValue={event ? event.image : ''}\n        />\n      </p>\n      <p>\n        <label htmlFor=\"date\">Date</label>\n        <input\n          id=\"date\"\n          type=\"date\"\n          name=\"date\"\n          required\n          defaultValue={event ? event.date : ''}\n        />\n      </p>\n      <p>\n        <label htmlFor=\"description\">Description</label>\n        <textarea\n          id=\"description\"\n          name=\"description\"\n          rows=\"5\"\n          required\n          defaultValue={event ? event.description : ''}\n        />\n      </p>\n      <div className={classes.actions}>\n        <button type=\"button\" onClick={cancelHandler} disabled={isSubmitting}>\n          Cancel\n        </button>\n        <button disabled={isSubmitting}>\n          {isSubmitting ? 'Submitting...' : 'Save'}\n        </button>\n      </div>\n    </Form>\n  );\n}\n\nexport default EventForm;\n\nexport async function action({ request, params }) {\n  const method = request.method;\n  const data = await request.formData();\n\n  const eventData = {\n    title: data.get('title'),\n    image: data.get('image'),\n    date: data.get('date'),\n    description: data.get('description'),\n  };\n\n  let url = 'http://localhost:8080/events';\n\n  if (method === 'PATCH') {\n    const eventId = params.eventId;\n    url = 'http://localhost:8080/events/' + eventId;\n  }\n\n  const response = await fetch(url, {\n    method: method,\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(eventData),\n  });\n\n  if (response.status === 422) {\n    return response;\n  }\n\n  if (!response.ok) {\n    throw json({ message: 'Could not save event.' }, { status: 500 });\n  }\n\n  return redirect('/events');\n}\n\n/**\n * \n * navigate and Redirect are both used to change the route programmatically, \n * but navigate is modern and use in function\n * \n * \n *  const navigation = useNavigation();\n * \n *       {navigation.state === 'loading' && <p>Loading...</p>}\n                    idle .. ne process\n                    laoding .. \n                    submitting .. post or put request\n\n   \n */"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}